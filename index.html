<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>ui5Query</title>

<!-- OpenUI5 lib from CDN -->
<script
    src="https://openui5.hana.ondemand.com/resources/sap-ui-core.js"
    id="sap-ui-bootstrap"
    data-sap-ui-libs="sap.m"
    data-sap-ui-theme="base">
</script>

<!-- starparam lib for parsing url params -->
<script>
/* https://github.com/jonbri/starparam v1.0.1 Thu Dec 22 13:41:34 EST 2016 */
!function(){function r(r){return null===r||void 0===r}function n(n){var a;if(!r(n))return a=new RegExp("(^[^?&#]+)\\??([^#]*)#?(.*)$").exec(n),r(a)?{params:[]}:{prefix:a[1],params:a[2].split("&").filter(function(r){return""!==r}).map(function(r){return function(r){return{name:r[0],value:r[1]}}(r.split("="))}),hash:""===a[3]?void 0:a[3]}}function a(n){var a="";if(!r(n))return r(n.prefix)===!1&&(a+=n.prefix),r(n.params)===!1&&n.params.forEach(function(r,n){a+=0===n?"?":"&",a+=r.name+"="+r.value}),r(n.hash)===!1&&(a+="#"+n.hash),a}function e(r,a){return n(r).params.filter(function(r){return r.name===a})[0]}function t(n,a){var t;if(!r(n)&&!r(a))return t=e(n,a),r(t)?void 0:t.value}function i(t,i,u){var o;if(!r(t)&&!r(i))return r(u)&&(u=""),o=n(t),r(e(t,i))?o.params.push({name:i,value:u}):o.params=o.params.map(function(r){return r.name===i&&(r.value=u),r}),a(o)}function u(e,t){var i;if(!r(e))return r(t)?e:(i=n(e),i.params=i.params.filter(function(r){return r.name!==t}),a(i))}!function(){var e={parse:function(a){if(0===arguments.length&&(a=window.location.href),!r(a))return n(a)},stringify:function(r){return a(r)},get:function(n,a){var e;return a=a||{},e=a.url,r(e)&&(e=window.location.href),t(e,n)},set:function(n,a,e){var t,u;if(e=e||{},t=e.hasOwnProperty("url")?e.url:window.location.href,!r(t))return u=i(t,n,a)},remove:function(n,a){var e,t;if(a=a||{},e=a.hasOwnProperty("url")?a.url:window.location.href,!r(e))return t=u(e,n)}};window.__is_starparam_embedded===!0?window.__embedded_starparam=e:window.starparam=e}()}();
</script>

<!-- simple page styling -->
<style>
  .sapUiBody>h1 { display: inline }
  .sapUiBody>h1>a { text-decoration: none; color: black }
  nav { display: inline }
  nav>ul { display: inline }
  nav>ul>li { display: inline }
  #controls { padding: 5px; background-color: gold; border: 1px solid black; }
  .sapMBtn, .sapMText, .sapMLabel { margin: 2px !important; }
  .sapMText, .sapMLabel { font-size: 12px !important; border: 1px solid silver !important; }
</style>

<!-- render OpenUI5 controls -->
<script>
window._ui5query_numOfEachType = 3; // used in qunit
sap.ui.getCore().attachInit(function() {
    var i = 0;

    // place buttons
    for (i = 0; i < window._ui5query_numOfEachType; i++) {
        (new sap.m.Button({
            id: '__button' + i,
            text: 'sap.m.Button ' + i
        })).placeAt('buttons');
    }

    // place text controls
    for (i = 0; i < window._ui5query_numOfEachType; i++) {
        (new sap.m.Text({
            id: '__text' + i,
            text: 'sap.m.Text ' + i
        })).placeAt('texts');
    }

    // place datepicker controls
    for (i = 0; i < window._ui5query_numOfEachType; i++) {
        (new sap.m.DatePicker({
            id: '__datePicker' + i
        })).placeAt('datepickers');
    }

    // place label controls
    for (i = 0; i < window._ui5query_numOfEachType; i++) {
        (new sap.m.Label({
            id: '__label' + i,
            text: 'sap.m.Label ' + i
        })).placeAt('labels');
    }
});
</script>
</head>
<body class="sapUiBody">
  <h1><a href="./">ui5Query</a></h1>
  <nav>
    <ul>
      <li><a href="https://github.com/jonbri/ui5query">GitHub</a></li>
      <li><a href="https://www.npmjs.com/package/ui5query">NPM</a></li>
    </ul>
  </nav>

  <hr />

  <div id="controls">
    <div id="buttons"></div>
    <div id="texts"></div>
    <div id="datepickers"></div>
    <div id="labels"></div>
  </div>

  <!-- ui5query lib -->
  <script>
/* https://github.com/jonbri/ui5query v0.0.1 Fri Mar 10 15:25:43 EST 2017 */
!function(){"use strict";function t(t){var n=b=h(t).filter(function(t){return null!==t.sIdMatch||null!==t.sNameMatch});return console.log(b.length+" search results"),m(n),c(n)}function n(){var t=b=h();return m(t),c(t)}function e(t){return l(t)}function r(){y={},y=jQuery.extend({},{},P),b=[]}function o(t){return b=t.map(function(t){return{$element:jQuery(t),sIdMatch:void 0,sNameMatch:void 0}}),p()}function a(n){return t(n,y),p()}function i(t,n,e){var r={name:t,fnFirstPass:n,fnLastPass:e};w[t]=!1,v.push(r),M[t]=function(n){return jQuery.isArray(n)?(g(r,b),n):a(n)[t]().toArray()}}function u(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function c(t){return t.map(function(t){return t.$element.control()[0]})}function l(t){var n;if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(y[n]=t[n]);return y}function s(){return jQuery("*[id]").toArray().map(function(t){return jQuery(t)}).filter(function(t){return t.control().length>0&&t.attr("id")===t.control()[0].getId()})}function f(t,n){for(var e in n)n.hasOwnProperty(e)&&t.css(e,n[e])}function h(t){var n;void 0===t&&(t=/.*/);try{n=t instanceof RegExp?t:new RegExp(t,"i")}catch(e){n=new RegExp(u(t),"i")}return s().map(function(t){return{$element:t,idMatch:t.attr("id").match(n),controlNameMatch:t.control()[0].getMetadata().getName().match(n)}}).map(function(t){return{$element:t.$element,sIdMatch:null!==t.idMatch?t.idMatch[0]:null,sNameMatch:null!==t.controlNameMatch?t.controlNameMatch[0]:null}})}function d(){M.target=void 0,delete M.target,[0,1,2,3,4,5,6,7,8,9].forEach(function(t){M["target"+t]=void 0,delete M["target"+t]})}function m(t){d(),t.length>0&&(M.target=t[0].$element.control()[0],t.slice(0,10).forEach(function(t,n){M["target"+n]=t.$element.control()[0]}))}function p(){var t={toArray:function(){return b.map(function(t){return t.$element.get(0)})},pipe:a};return v.forEach(function(n){t[n.name]=function(){return g(n,b),p()}}),t}function g(t,n){return w[t.name]===!1&&(w[t.name]=!0,Promise.all(n.map(function(n){var e={idMatch:n.sIdMatch,nameMatch:n.sNameMatch};return n=n.$element,t.fnFirstPass.call(e,n),new Promise(function(r){setTimeout(function(){t.fnLastPass.call(e,n),r()},y.standoutDelay)})})).then(function(){w[t.name]=!1})),n}var y,M=function(t){return a(t)},v=[],$=["popup","highlight"],b=[],w={},P={standoutDelay:3e3,labelStyle:{border:"1px solid #c2d6d6",backgroundColor:"#FFF",color:"#000",fontSize:"10px",position:"absolute"},controlStyle:{border:"2px solid #00FF00"}};i("popup",function(t){var n=t.offset(),e=jQuery("<ui5query></ui5query>").addClass("ui5query_label").css("left",n.left).css("top",n.top);f(e,y.labelStyle),e.html([t.attr("id").replace(new RegExp("("+this.idMatch+")"),"<strong>$1</strong>"),t.control()[0].getMetadata().getName().replace(new RegExp("("+this.nameMatch+")"),"<strong>$1</strong>")].reduce(function(t,n){return t+"<br />"+n})).appendTo(document.body),this.$label=e},function(t){this.$label.remove()}),i("highlight",function(t){this.sOrigBorder=t.css("border"),f(t,y.controlStyle),t.addClass("ui5query_match")},function(t){t.css("border",this.sOrigBorder),t.removeClass("ui5query_match")}),i("standout",function(t){var n=this;$.forEach(function(e){v.filter(function(t){return t.name===e})[0].fnFirstPass.call(n,t)})},function(t){var n=this;$.forEach(function(e){v.filter(function(t){return t.name===e})[0].fnLastPass.call(n,t)})}),r(),M.pipe=a,M.search=t,M.all=n,M.config=e,M.reset=r,M.plugin=i,M.toPipeline=o,window.ui$=M,window.ui5Query=M}();
  </script>
</body>
</html>